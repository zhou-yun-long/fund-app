import{d as z,n as y,u as A,aQ as L,j as M,k as v,r as p,l as O,y as _,c as j,z as F,p as B,an as x,aR as Q,am as V,x as X,A as $,B as q}from"./index-COLuSNnH.js";const[G,C]=j("swipe-cell"),J={name:_(""),disabled:Boolean,leftWidth:y,rightWidth:y,beforeClose:Function,stopPropagation:Boolean};var K=z({name:G,props:J,emits:["open","close","click"],setup(a,{emit:r,slots:f}){let s,l,u,c;const d=p(),k=p(),w=p(),o=O({offset:0,dragging:!1}),i=F(),T=e=>e.value?V(e).width:0,g=B(()=>x(a.leftWidth)?+a.leftWidth:T(k)),h=B(()=>x(a.rightWidth)?+a.rightWidth:T(w)),W=e=>{o.offset=e==="left"?g.value:-h.value,s||(s=!0,r("open",{name:a.name,position:e}))},m=e=>{o.offset=0,s&&(s=!1,r("close",{name:a.name,position:e}))},D=e=>{const t=Math.abs(o.offset),n=.15,I=s?1-n:n,R=e==="left"?g.value:h.value;R&&t>R*I?W(e):m(e)},H=e=>{a.disabled||(u=o.offset,i.start(e))},N=e=>{if(a.disabled)return;const{deltaX:t}=i;i.move(e),i.isHorizontal()&&(l=!0,o.dragging=!0,(!s||t.value*u<0)&&X(e,a.stopPropagation),o.offset=$(t.value+u,-h.value,g.value))},b=()=>{o.dragging&&(o.dragging=!1,D(o.offset>0?"left":"right"),setTimeout(()=>{l=!1},0))},P=(e="outside",t)=>{c||(r("click",e),s&&!l&&(c=!0,Q(a.beforeClose,{args:[{event:t,name:a.name,position:e}],done:()=>{c=!1,m(e)},canceled:()=>c=!1,error:()=>c=!1})))},S=e=>t=>{(l||s)&&t.stopPropagation(),!l&&P(e,t)},E=(e,t)=>{const n=f[e];if(n)return v("div",{ref:t,class:C(e),onClick:S(e)},[n()])};return A({open:W,close:m}),L(d,e=>P("outside",e),{eventName:"touchstart"}),M("touchmove",N,{target:d}),()=>{var e;const t={transform:`translate3d(${o.offset}px, 0, 0)`,transitionDuration:o.dragging?"0s":".6s"};return v("div",{ref:d,class:C(),onClick:S("cell"),onTouchstartPassive:H,onTouchend:b,onTouchcancel:b},[v("div",{class:C("wrapper"),style:t},[E("left",k),(e=f.default)==null?void 0:e.call(f),E("right",w)])])}}});const Y=q(K);export{Y as S};
