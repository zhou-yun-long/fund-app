const l="https://raw.githubusercontent.com/xiriovo/fund-app/main/public/config/announcement.json",r="fund_app_shown_announcements",m="fund_app_last_config_check";async function h(){try{const n=`${l}?t=${Date.now()}`,t=await fetch(n,{method:"GET",cache:"no-cache"});if(!t.ok)return console.warn("远程配置请求失败:",t.status),null;const o=await t.json();return localStorage.setItem(m,Date.now().toString()),o}catch(n){return console.warn("获取远程配置失败:",n),null}}function p(n){const t=new Date,o=f();return n.announcements.filter(e=>{const c=new Date(e.startTime),s=new Date(e.endTime);return!(!(t>=c&&t<=s)||e.showOnce&&o.includes(e.id))})}function f(){try{const n=localStorage.getItem(r);return n?JSON.parse(n):[]}catch{return[]}}function w(n){const t=f();t.includes(n)||(t.push(n),localStorage.setItem(r,JSON.stringify(t)))}function d(){localStorage.removeItem(r)}function u(n,t){const o=n.split(".").map(Number),e=t.split(".").map(Number),c=Math.max(o.length,e.length);for(let s=0;s<c;s++){const a=o[s]||0,i=e[s]||0;if(a<i)return!0;if(a>i)return!1}return!1}function g(n,t){const o=u(n,t.version),e=t.forceUpdate||u(n,t.minVersion);return{needUpdate:o,forceUpdate:e}}const _="1.3.0";export{_ as A,d as a,g as c,h as f,p as g,w as m};
