import{c as de,d as Z,t as ue,n as _e,u as Ae,w as G,a as Ye,b as Ge,e as qe,o as ye,f as We,g as He,h as Xe,i as Ke,j as Je,k as u,r as S,l as Te,m as Se,p as F,q as re,s as be,v as Ne,x as je,y as ge,z as Qe,A as we,B as ve,C as Pe,D as Ze,E as et,F as tt,G as nt,H as at,I as st,J as d,K,L as T,M as t,N as m,O as J,P as xe,_ as ze,Q as ot,R as w,S as A,T as R,U as M,V as Y,W as lt,X as it,Y as ut,Z as rt,$ as U,a0 as Ce,a1 as $e,a2 as ct,a3 as ae}from"./index-COLuSNnH.js";/* empty css              */import"./index-BR0IqM1Y.js";import{F as dt}from"./index-BsOY-DgV.js";import{s as vt,c as ft}from"./index-CyiIaGJT.js";/* empty css              */import{P as mt}from"./index-lh23UwTI.js";import{E as pt}from"./index-7ADYuEsa.js";/* empty css              *//* empty css              */import{u as ht}from"./fund-qjlmdvOA.js";import{fetchMarketIndicesFast as gt,fetchGlobalIndices as wt}from"./fundFast-BTB3GdVE.js";import{f as _t,c as yt,A as kt,g as bt,m as Ct}from"./version-BiYbdZ5Q.js";import{S as $t}from"./index-DhMkXSC4.js";import{g as At,f as Tt,a as St}from"./format-DMY7EWAz.js";import{B as Fe}from"./index-dROw2vyl.js";import{s as Nt}from"./function-call-fsbkCKQc.js";import"./use-id-Bb8U-BO_.js";import"./storage-BvZjhTaj.js";const[Ve,ce]=de("swipe"),Pt={loop:ue,width:_e,height:_e,vertical:Boolean,autoplay:ge(0),duration:ge(500),touchable:ue,lazyRender:Boolean,initialSwipe:ge(0),indicatorColor:String,showIndicators:ue,stopPropagation:ue},Ie=Symbol(Ve);var xt=Z({name:Ve,props:Pt,emits:["change","dragStart","dragEnd"],setup(n,{emit:p,slots:v}){const f=S(),$=S(),o=Te({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let x=!1;const C=Qe(),{children:z,linkChildren:y}=Se(Ie),r=F(()=>z.length),k=F(()=>o[n.vertical?"height":"width"]),h=F(()=>n.vertical?C.deltaY.value:C.deltaX.value),i=F(()=>o.rect?(n.vertical?o.rect.height:o.rect.width)-k.value*r.value:0),c=F(()=>k.value?Math.ceil(Math.abs(i.value)/k.value):r.value),_=F(()=>r.value*k.value),b=F(()=>(o.active+r.value)%r.value),g=F(()=>{const s=n.vertical?"vertical":"horizontal";return C.direction.value===s}),D=F(()=>{const s={transitionDuration:`${o.swiping?0:n.duration}ms`,transform:`translate${n.vertical?"Y":"X"}(${+o.offset.toFixed(2)}px)`};if(k.value){const e=n.vertical?"height":"width",l=n.vertical?"width":"height";s[e]=`${_.value}px`,s[l]=n[l]?`${n[l]}px`:""}return s}),O=s=>{const{active:e}=o;return s?n.loop?we(e+s,-1,r.value):we(e+s,0,c.value):e},ee=(s,e=0)=>{let l=s*k.value;n.loop||(l=Math.min(l,-i.value));let N=e-l;return n.loop||(N=we(N,i.value,0)),N},I=({pace:s=0,offset:e=0,emitChange:l})=>{if(r.value<=1)return;const{active:N}=o,P=O(s),V=ee(P,e);if(n.loop){if(z[0]&&V!==i.value){const ne=V<i.value;z[0].setOffset(ne?_.value:0)}if(z[r.value-1]&&V!==0){const ne=V>0;z[r.value-1].setOffset(ne?-_.value:0)}}o.active=P,o.offset=V,l&&P!==N&&p("change",b.value)},q=()=>{o.swiping=!0,o.active<=-1?I({pace:r.value}):o.active>=r.value&&I({pace:-r.value})},se=()=>{q(),C.reset(),re(()=>{o.swiping=!1,I({pace:-1,emitChange:!0})})},te=()=>{q(),C.reset(),re(()=>{o.swiping=!1,I({pace:1,emitChange:!0})})};let oe;const W=()=>clearTimeout(oe),B=()=>{W(),+n.autoplay>0&&r.value>1&&(oe=setTimeout(()=>{te(),B()},+n.autoplay))},L=(s=+n.initialSwipe)=>{if(!f.value)return;const e=()=>{var l,N;if(!be(f)){const P={width:f.value.offsetWidth,height:f.value.offsetHeight};o.rect=P,o.width=+((l=n.width)!=null?l:P.width),o.height=+((N=n.height)!=null?N:P.height)}r.value&&(s=Math.min(r.value-1,s),s===-1&&(s=r.value-1)),o.active=s,o.swiping=!0,o.offset=ee(s),z.forEach(P=>{P.setOffset(0)}),B()};be(f)?Ne().then(e):e()},le=()=>L(o.active);let ie;const H=s=>{!n.touchable||s.touches.length>1||(C.start(s),x=!1,ie=Date.now(),W(),q())},X=s=>{n.touchable&&o.swiping&&(C.move(s),g.value&&(!n.loop&&(o.active===0&&h.value>0||o.active===r.value-1&&h.value<0)||(je(s,n.stopPropagation),I({offset:h.value}),x||(p("dragStart",{index:b.value}),x=!0))))},E=()=>{if(!n.touchable||!o.swiping)return;const s=Date.now()-ie,e=h.value/s;if((Math.abs(e)>.25||Math.abs(h.value)>k.value/2)&&g.value){const N=n.vertical?C.offsetY.value:C.offsetX.value;let P=0;n.loop?P=N>0?h.value>0?-1:1:0:P=-Math[h.value>0?"ceil":"floor"](h.value/k.value),I({pace:P,emitChange:!0})}else h.value&&I({pace:0});x=!1,o.swiping=!1,p("dragEnd",{index:b.value}),B()},fe=(s,e={})=>{q(),C.reset(),re(()=>{let l;n.loop&&s===r.value?l=o.active===0?0:s:l=s%r.value,e.immediate?re(()=>{o.swiping=!1}):o.swiping=!1,I({pace:l-o.active,emitChange:!0})})},me=(s,e)=>{const l=e===b.value,N=l?{backgroundColor:n.indicatorColor}:void 0;return u("i",{style:N,class:ce("indicator",{active:l})},null)},pe=()=>{if(v.indicator)return v.indicator({active:b.value,total:r.value});if(n.showIndicators&&r.value>1)return u("div",{class:ce("indicators",{vertical:n.vertical})},[Array(r.value).fill("").map(me)])};return Ae({prev:se,next:te,state:o,resize:le,swipeTo:fe}),y({size:k,props:n,count:r,activeIndicator:b}),G(()=>n.initialSwipe,s=>L(+s)),G(r,()=>L(o.active)),G(()=>n.autoplay,B),G([Ye,Ge,()=>n.width,()=>n.height],le),G(qe(),s=>{s==="visible"?B():W()}),ye(L),We(()=>L(o.active)),He(()=>L(o.active)),Xe(W),Ke(W),Je("touchmove",X,{target:$}),()=>{var s;return u("div",{ref:f,class:ce()},[u("div",{ref:$,style:D.value,class:ce("track",{vertical:n.vertical}),onTouchstartPassive:H,onTouchend:E,onTouchcancel:E},[(s=v.default)==null?void 0:s.call(v)]),pe()])}}});const zt=ve(xt),[Ft,Vt]=de("swipe-item");var It=Z({name:Ft,setup(n,{slots:p}){let v;const f=Te({offset:0,inited:!1,mounted:!1}),{parent:$,index:o}=Pe(Ie);if(!$)return;const x=F(()=>{const y={},{vertical:r}=$.props;return $.size.value&&(y[r?"height":"width"]=`${$.size.value}px`),f.offset&&(y.transform=`translate${r?"Y":"X"}(${f.offset}px)`),y}),C=F(()=>{const{loop:y,lazyRender:r}=$.props;if(!r||v)return!0;if(!f.mounted)return!1;const k=$.activeIndicator.value,h=$.count.value-1,i=k===0&&y?h:k-1,c=k===h&&y?0:k+1;return v=o.value===k||o.value===i||o.value===c,v}),z=y=>{f.offset=y};return ye(()=>{Ne(()=>{f.mounted=!0})}),Ae({setOffset:z}),()=>{var y;return u("div",{class:Vt(),style:x.value},[C.value?(y=p.default)==null?void 0:y.call(p):null])}}});const Et=ve(It),[Ee,Rt]=de("radio-group"),Ut={shape:String,disabled:Boolean,iconSize:_e,direction:String,modelValue:Ze,checkedColor:String},Re=Symbol(Ee);var Dt=Z({name:Ee,props:Ut,emits:["change","update:modelValue"],setup(n,{emit:p,slots:v}){const{linkChildren:f}=Se(Re),$=o=>p("update:modelValue",o);return G(()=>n.modelValue,o=>p("change",o)),f({props:n,updateValue:$}),et(()=>n.modelValue),()=>{var o;return u("div",{class:Rt([n.direction]),role:"radiogroup"},[(o=v.default)==null?void 0:o.call(v)])}}});const Ot=ve(Dt),Mt=at({},ft,{shape:String}),[Bt,Lt]=de("radio");var Yt=Z({name:Bt,props:Mt,emits:["update:modelValue"],setup(n,{emit:p,slots:v}){const{parent:f}=Pe(Re),$=()=>(f?f.props.modelValue:n.modelValue)===n.name,o=()=>{f?f.updateValue(n.name):p("update:modelValue",n.name)};return()=>u(vt,nt({bem:Lt,role:"radio",parent:f,checked:$(),onToggle:o},n),tt(v,["default","icon"]))}});const Gt=ve(Yt),qt={change_up:{label:"涨幅超过",unit:"%",icon:"arrow-up"},change_down:{label:"跌幅超过",unit:"%",icon:"arrow-down"},target_high:{label:"估值高于",unit:"",icon:"chart-trending-o"},target_low:{label:"估值低于",unit:"",icon:"chart-trending-o"}},Ue="fund_alerts";function Wt(){return`alert_${Date.now()}_${Math.random().toString(36).slice(2,8)}`}function Ht(){try{const n=localStorage.getItem(Ue);return n?JSON.parse(n):[]}catch{return[]}}function Q(n){localStorage.setItem(Ue,JSON.stringify(n))}const Xt=st("alert",()=>{const n=S(Ht()),p=S("default"),v=F(()=>n.value.filter(i=>i.enabled&&!i.triggered));function f(i){return n.value.filter(c=>c.code===i)}async function $(){if(!("Notification"in window))return console.warn("浏览器不支持通知"),!1;if(Notification.permission==="granted")return p.value="granted",!0;if(Notification.permission!=="denied"){const i=await Notification.requestPermission();return p.value=i,i==="granted"}return!1}function o(i,c,_){if(Notification.permission==="granted")try{new Notification(i,{body:c,icon:_||"/vite.svg",tag:"fund-alert",requireInteraction:!0})}catch(b){console.error("发送通知失败:",b)}}function x(i){const c={...i,id:Wt(),triggered:!1,createdAt:Date.now()};return n.value.push(c),Q(n.value),c}function C(i,c){const _=n.value.findIndex(b=>b.id===i);return _===-1?!1:(n.value[_]={...n.value[_],...c},Q(n.value),!0)}function z(i){const c=n.value.findIndex(_=>_.id===i);return c===-1?!1:(n.value.splice(c,1),Q(n.value),!0)}function y(i){const c=n.value.findIndex(_=>_.id===i);return c===-1?!1:(n.value[c].enabled=!n.value[c].enabled,n.value[c].enabled&&(n.value[c].triggered=!1),Q(n.value),!0)}function r(i,c,_){const b=f(i).filter(g=>g.enabled&&!g.triggered);for(const g of b){let D=!1,O="";switch(g.type){case"change_up":_>=g.threshold&&(D=!0,O=`涨幅达到 ${_.toFixed(2)}%，超过预设的 ${g.threshold}%`);break;case"change_down":_<=-g.threshold&&(D=!0,O=`跌幅达到 ${Math.abs(_).toFixed(2)}%，超过预设的 ${g.threshold}%`);break;case"target_high":c>=g.threshold&&(D=!0,O=`估值 ${c.toFixed(4)} 已达到目标高位 ${g.threshold}`);break;case"target_low":c<=g.threshold&&(D=!0,O=`估值 ${c.toFixed(4)} 已达到目标低位 ${g.threshold}`);break}D&&(C(g.id,{triggered:!0}),o(`${g.name} 提醒`,O))}}function k(){let i=!1;for(const c of n.value)c.triggered&&(c.triggered=!1,i=!0);i&&Q(n.value)}function h(){n.value=[],Q(n.value)}return"Notification"in window&&(p.value=Notification.permission),{alerts:n,notificationPermission:p,enabledAlerts:v,getAlertsByFund:f,requestNotificationPermission:$,sendNotification:o,addAlert:x,updateAlert:C,deleteAlert:z,toggleAlert:y,checkAlerts:r,resetTriggeredAlerts:k,clearAllAlerts:h}}),Kt={class:"fund-info"},Jt={class:"fund-name"},jt={class:"fund-code"},Qt={class:"estimate-value"},Zt={class:"estimate-change"},en=Z({__name:"FundCard",props:{fund:{}},emits:["delete","click","longpress"],setup(n,{emit:p}){const v=n,f=p,$=S(""),o=S(0);G(()=>v.fund.estimateValue,(i,c)=>{const _=typeof i=="string"?parseFloat(i):i||0,b=typeof c=="string"?parseFloat(c):c||0;_!==b&&b!==0&&($.value=_>b?"flash-up":"flash-down",setTimeout(()=>{$.value=""},500)),o.value=b});const x=F(()=>v.fund.estimateChange?At(v.fund.estimateChange):""),C=F(()=>Tt(v.fund.estimateChange||0)),z=F(()=>St(v.fund.estimateValue||0));let y=null;function r(){y=setTimeout(()=>{f("longpress")},500)}function k(){y&&(clearTimeout(y),y=null)}function h(){y&&(clearTimeout(y),y=null)}return(i,c)=>{const _=Fe,b=$t;return d(),K(b,null,{right:T(()=>[u(_,{square:"",type:"danger",text:"删除",class:"delete-btn",onClick:c[1]||(c[1]=xe(g=>f("delete",n.fund.code),["stop"]))})]),default:T(()=>[t("div",{class:J(["fund-card",{loading:n.fund.loading}]),onClick:c[0]||(c[0]=g=>f("click",n.fund.code)),onTouchstart:r,onTouchend:k,onTouchmove:h},[t("div",Kt,[t("div",Jt,m(n.fund.name||"加载中..."),1),t("div",jt,m(n.fund.code),1)]),t("div",{class:J(["fund-value",[x.value,$.value]])},[t("div",Qt,m(z.value),1),t("div",Zt,m(C.value),1)],2)],34)]),_:1})}}}),tn=ze(en,[["__scopeId","data-v-1d8c0d02"]]),nn={class:"home-page"},an={class:"top-header"},sn={class:"header-right"},on={class:"notice-bar"},ln={class:"force-update-content"},un={key:0,class:"update-card"},rn={class:"update-info"},cn={key:1,class:"announcement-cards"},dn=["onClick"],vn={class:"announcement-title"},fn={key:0,class:"market-overview"},mn={class:"overview-title"},pn={class:"index-grid"},hn={class:"index-name"},gn={class:"index-value"},wn={class:"index-change"},_n={key:1,class:"global-indices"},yn={class:"global-grid"},kn={class:"global-name"},bn={class:"global-price"},Cn={class:"global-change"},$n={class:"quick-actions"},An={class:"action-icon"},Tn={class:"action-icon"},Sn={class:"action-icon"},Nn={class:"action-icon"},Pn={class:"action-icon"},xn={class:"action-icon"},zn={class:"action-icon"},Fn={class:"action-icon"},Vn={class:"news-section"},In={key:0,class:"news-list"},En=["onClick"],Rn={class:"news-content"},Un={class:"news-title"},Dn={class:"news-meta"},On={class:"news-source"},Mn={class:"news-time"},Bn={key:2,class:"section-header"},Ln={class:"fund-count"},Yn={key:0,class:"refresh-time"},Gn={key:0,class:"alert-badge"},qn={class:"alert-dialog"},Wn={class:"dialog-header"},Hn={class:"dialog-fund"},Xn={class:"dialog-footer"},Kn={key:0,class:"news-detail"},Jn={class:"news-detail-header"},jn={class:"news-detail-content"},Qn={class:"news-detail-title"},Zn={class:"news-detail-meta"},ea={class:"news-detail-summary"},ta={key:0,class:"news-detail-footer"},na={key:1,class:"news-detail-footer"},aa={key:0,class:"announcement-detail"},sa={class:"announcement-detail-content"},oa=["href"],la={key:1},ia={class:"announcement-detail-footer"},ua=Z({__name:"Home",setup(n){const p=lt(),v=ht(),f=Xt();let $=!1;const o=S([]),x=S([]),C=S(!1),z=["基金投资有风险，入市需谨慎","交易时间：工作日 9:30-15:00"],y=S([...z]),r=S([]),k=S(!1),h=S(null),i=S(null),c=S([]),_=S(!1),b=S(!1),g=S(null);ye(async()=>{v.initWatchlist(),await f.requestNotificationPermission(),q(),se(),te(),D()});async function D(){if(!$){$=!0;try{const s=await _t();if(!s)return;const{needUpdate:e,forceUpdate:l}=yt(kt,s);if(e&&(i.value={needUpdate:e,forceUpdate:l,latestVersion:s.version,updateUrl:s.updateUrl}),r.value=bt(s),r.value.length>0){const N=r.value.map(P=>`【${P.title}】${P.content.split(`
`)[0]}`);y.value=[...N,...z],setTimeout(()=>{r.value.length>0&&(h.value=r.value[0],k.value=!0)},500)}}catch(s){console.warn("加载远程配置失败:",s)}}}function O(s){h.value=s,k.value=!0}function ee(){h.value&&(Ct(h.value.id),r.value=r.value.filter(s=>s.id!==h.value?.id)),k.value=!1,h.value=null}function I(){i.value?.updateUrl&&window.open(i.value.updateUrl,"_blank")}async function q(){try{o.value=await gt()}catch{}}async function se(){try{x.value=await wt()}catch{}}async function te(){_.value=!0;try{c.value=await ot(6)}catch{}finally{_.value=!1}}G(()=>v.watchlist,s=>{for(const e of s)if(e.estimateValue&&e.estimateChange){const l=parseFloat(e.estimateValue),N=parseFloat(e.estimateChange);!isNaN(l)&&!isNaN(N)&&f.checkAlerts(e.code,l,N)}},{deep:!0});async function oe(){await Promise.all([v.refreshEstimates(),q(),se(),te()]),ae("刷新成功")}async function W(s){try{await Nt({title:"确认删除",message:"确定要从自选中删除该基金吗？"}),v.removeFund(s),ae("已删除")}catch{}}function B(){p.push("/search")}function L(s){g.value=s,b.value=!0}function le(){g.value?.url?window.open(g.value.url,"_blank"):ae("暂无详情链接")}function ie(s){p.push(`/detail/${s}`)}const H=S(!1),X=S(null),E=S({type:"change_up",threshold:""}),fe=Object.entries(qt).map(([s,e])=>({value:s,label:e.label}));function me(s,e){X.value={code:s,name:e},E.value={type:"change_up",threshold:""},H.value=!0}function pe(){if(!X.value)return;const s=parseFloat(E.value.threshold);if(isNaN(s)||s<=0){ae("请输入有效的阈值");return}f.addAlert({code:X.value.code,name:X.value.name,type:E.value.type,threshold:s,enabled:!0}),ae("提醒已设置"),H.value=!1}return(s,e)=>{const l=it,N=Et,P=zt,V=Fe,ne=ut,De=ct,Oe=pt,Me=mt,Be=Gt,Le=Ot,ke=dt,he=rt;return d(),w("div",nn,[t("div",an,[e[26]||(e[26]=t("div",{class:"header-left"},[t("span",{class:"app-title"},"基金宝")],-1)),t("div",{class:"search-bar",onClick:B},[u(l,{name:"search",size:"16"}),e[25]||(e[25]=t("span",null,"搜索基金代码/名称",-1))]),t("div",sn,[u(l,{name:"bullhorn-o",size:"22",onClick:e[0]||(e[0]=a=>A(p).push("/announcement"))}),u(l,{name:"setting-o",size:"22",onClick:e[1]||(e[1]=a=>A(p).push("/alerts"))})])]),t("div",on,[u(l,{name:"volume-o",class:"notice-icon"}),u(P,{class:"notice-swipe",vertical:"",autoplay:3e3,"show-indicators":!1,touchable:!1},{default:T(()=>[(d(!0),w(M,null,Y(y.value,(a,j)=>(d(),K(N,{key:j},{default:T(()=>[U(m(a),1)]),_:2},1024))),128))]),_:1})]),u(ne,{show:i.value?.forceUpdate,"z-index":"9999",class:"force-update-overlay"},{default:T(()=>[t("div",ln,[u(l,{name:"info-o",size:"48",color:"#ee0a24"}),t("h3",null,"发现新版本 v"+m(i.value?.latestVersion),1),e[28]||(e[28]=t("p",null,"当前版本过低，请更新后继续使用",-1)),u(V,{type:"danger",block:"",onClick:I},{default:T(()=>[...e[27]||(e[27]=[U(" 立即更新 ",-1)])]),_:1})])]),_:1},8,["show"]),i.value?.needUpdate&&!i.value?.forceUpdate?(d(),w("div",un,[t("div",rn,[u(l,{name:"upgrade",size:"20",color:"#1989fa"}),t("span",null,"发现新版本 v"+m(i.value.latestVersion),1)]),u(V,{size:"small",type:"primary",plain:"",onClick:I},{default:T(()=>[...e[29]||(e[29]=[U(" 立即更新 ",-1)])]),_:1}),u(l,{name:"cross",class:"close-btn",onClick:e[2]||(e[2]=a=>i.value=null)})])):R("",!0),r.value.length>0?(d(),w("div",cn,[(d(!0),w(M,null,Y(r.value,a=>(d(),w("div",{key:a.id,class:J(["announcement-card",a.type]),onClick:j=>O(a)},[u(l,{name:a.type==="update"?"upgrade":a.type==="warning"?"warning-o":"info-o",size:"18"},null,8,["name"]),t("span",vn,m(a.title),1),u(l,{name:"arrow",size:"14"})],10,dn))),128))])):R("",!0),u(Me,{modelValue:A(v).isRefreshing,"onUpdate:modelValue":e[14]||(e[14]=a=>A(v).isRefreshing=a),onRefresh:oe,class:"fund-list-container"},{default:T(()=>[o.value.length>0?(d(),w("div",fn,[t("div",mn,[e[30]||(e[30]=t("span",null,"大盘指数",-1)),t("span",{class:"view-more",onClick:e[3]||(e[3]=a=>A(p).push("/market"))},"更多 >")]),t("div",pn,[(d(!0),w(M,null,Y(o.value,a=>(d(),w("div",{key:a.code,class:J(["index-item",a.change>=0?"up":"down"])},[t("div",hn,m(a.name),1),t("div",gn,m(a.current.toFixed(2)),1),t("div",wn,m(a.change>=0?"+":"")+m(a.change.toFixed(2))+"% ",1)],2))),128))])])):R("",!0),x.value.length>0?(d(),w("div",_n,[t("div",{class:"section-header",onClick:e[4]||(e[4]=a=>C.value=!C.value)},[e[31]||(e[31]=t("span",null,"全球指数",-1)),u(l,{name:C.value?"arrow-up":"arrow-down",size:"14"},null,8,["name"])]),Ce(t("div",yn,[(d(!0),w(M,null,Y(x.value,a=>(d(),w("div",{key:a.code,class:J(["global-item",a.changePercent>=0?"up":"down"])},[t("div",kn,[t("span",{class:J(["region-tag",a.region])},m(a.region==="cn"?"中":a.region==="hk"?"港":a.region==="us"?"美":a.region==="eu"?"欧":"亚"),3),U(" "+m(a.name),1)]),t("div",bn,m(a.price>1e3?a.price.toFixed(0):a.price.toFixed(2)),1),t("div",Cn,m(a.changePercent>=0?"+":"")+m(a.changePercent.toFixed(2))+"% ",1)],2))),128))],512),[[$e,C.value]]),Ce(t("div",{class:"expand-hint",onClick:e[5]||(e[5]=a=>C.value=!0)}," 点击展开查看全球指数行情 ",512),[[$e,!C.value]])])):R("",!0),t("div",$n,[t("div",{class:"action-item",onClick:e[6]||(e[6]=a=>A(p).push("/search"))},[t("div",An,[u(l,{name:"search",size:"22"})]),e[32]||(e[32]=t("span",null,"搜索",-1))]),t("div",{class:"action-item",onClick:e[7]||(e[7]=a=>A(p).push("/compare"))},[t("div",Tn,[u(l,{name:"balance-o",size:"22"})]),e[33]||(e[33]=t("span",null,"对比",-1))]),t("div",{class:"action-item",onClick:e[8]||(e[8]=a=>A(p).push("/calculator"))},[t("div",Sn,[u(l,{name:"gold-coin-o",size:"22"})]),e[34]||(e[34]=t("span",null,"定投",-1))]),t("div",{class:"action-item",onClick:e[9]||(e[9]=a=>A(p).push("/manager-rank"))},[t("div",Nn,[u(l,{name:"friends-o",size:"22"})]),e[35]||(e[35]=t("span",null,"经理",-1))]),t("div",{class:"action-item",onClick:e[10]||(e[10]=a=>A(p).push("/backtest"))},[t("div",Pn,[u(l,{name:"chart-trending-o",size:"22"})]),e[36]||(e[36]=t("span",null,"回测",-1))]),t("div",{class:"action-item",onClick:e[11]||(e[11]=a=>A(p).push("/report"))},[t("div",xn,[u(l,{name:"description-o",size:"22"})]),e[37]||(e[37]=t("span",null,"报告",-1))]),t("div",{class:"action-item",onClick:e[12]||(e[12]=a=>A(p).push("/calendar"))},[t("div",zn,[u(l,{name:"calendar-o",size:"22"})]),e[38]||(e[38]=t("span",null,"日历",-1))]),t("div",{class:"action-item",onClick:e[13]||(e[13]=a=>A(p).push("/alerts"))},[t("div",Fn,[u(l,{name:"bell",size:"22"})]),e[39]||(e[39]=t("span",null,"提醒",-1))])]),t("div",Vn,[e[40]||(e[40]=t("div",{class:"section-header"},[t("span",{class:"section-title"},"财经资讯"),t("span",{class:"view-more"},"更多 >")],-1)),!_.value&&c.value.length>0?(d(),w("div",In,[(d(!0),w(M,null,Y(c.value,a=>(d(),w("div",{key:a.id,class:"news-item",onClick:j=>L(a)},[t("div",Rn,[t("div",Un,m(a.title),1),t("div",Dn,[t("span",On,m(a.source),1),t("span",Mn,m(a.time),1)])])],8,En))),128))])):_.value?(d(),K(De,{key:1,class:"news-loading"})):R("",!0)]),A(v).watchlist.length>0?(d(),w("div",Bn,[e[41]||(e[41]=t("span",{class:"section-title"},"自选基金",-1)),t("span",Ln,m(A(v).watchlist.length)+"只",1)])):R("",!0),A(v).watchlist.length>0?(d(),w(M,{key:3},[A(v).lastRefreshTime?(d(),w("div",Yn,[t("span",null,"最后刷新: "+m(A(v).lastRefreshTime),1),A(f).enabledAlerts.length>0?(d(),w("span",Gn,m(A(f).enabledAlerts.length)+"个提醒 ",1)):R("",!0)])):R("",!0),(d(!0),w(M,null,Y(A(v).watchlist,a=>(d(),K(tn,{key:a.code,fund:a,onDelete:W,onClick:ie,onLongpress:j=>me(a.code,a.name)},null,8,["fund","onLongpress"]))),128))],64)):(d(),K(Oe,{key:4,image:"search",description:"暂无自选基金"},{default:T(()=>[u(V,{round:"",type:"primary",onClick:B},{default:T(()=>[...e[42]||(e[42]=[U(" 添加基金 ",-1)])]),_:1})]),_:1})),e[43]||(e[43]=t("div",{class:"bottom-spacer"},null,-1))]),_:1},8,["modelValue"]),u(he,{show:H.value,"onUpdate:show":e[18]||(e[18]=a=>H.value=a),position:"bottom",round:""},{default:T(()=>[t("div",qn,[t("div",Wn,[e[44]||(e[44]=t("span",null,"设置提醒",-1)),u(l,{name:"cross",onClick:e[15]||(e[15]=a=>H.value=!1)})]),t("div",Hn,m(X.value?.name),1),u(ke,{label:"提醒类型"},{input:T(()=>[u(Le,{modelValue:E.value.type,"onUpdate:modelValue":e[16]||(e[16]=a=>E.value.type=a),direction:"horizontal"},{default:T(()=>[(d(!0),w(M,null,Y(A(fe),a=>(d(),K(Be,{key:a.value,name:a.value},{default:T(()=>[U(m(a.label),1)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(ke,{modelValue:E.value.threshold,"onUpdate:modelValue":e[17]||(e[17]=a=>E.value.threshold=a),label:E.value.type.includes("change")?"阈值(%)":"目标净值",type:"number",placeholder:E.value.type.includes("change")?"例如: 3":"例如: 1.5000"},null,8,["modelValue","label","placeholder"]),t("div",Xn,[u(V,{block:"",type:"primary",onClick:pe},{default:T(()=>[...e[45]||(e[45]=[U("确认设置",-1)])]),_:1})])])]),_:1},8,["show"]),u(he,{show:b.value,"onUpdate:show":e[21]||(e[21]=a=>b.value=a),position:"bottom",round:"",style:{height:"70%"}},{default:T(()=>[g.value?(d(),w("div",Kn,[t("div",Jn,[e[46]||(e[46]=t("span",null,"资讯详情",-1)),u(l,{name:"cross",onClick:e[19]||(e[19]=a=>b.value=!1)})]),t("div",jn,[t("h3",Qn,m(g.value.title),1),t("div",Zn,[t("span",null,m(g.value.source),1),t("span",null,m(g.value.time),1)]),t("div",ea,m(g.value.summary||"暂无摘要内容"),1)]),g.value.url?(d(),w("div",ta,[u(V,{block:"",type:"primary",onClick:le},{default:T(()=>[...e[47]||(e[47]=[U(" 查看原文 ",-1)])]),_:1})])):(d(),w("div",na,[u(V,{block:"",plain:"",onClick:e[20]||(e[20]=a=>b.value=!1)},{default:T(()=>[...e[48]||(e[48]=[U(" 知道了 ",-1)])]),_:1})]))])):R("",!0)]),_:1},8,["show"]),u(he,{show:k.value,"onUpdate:show":e[24]||(e[24]=a=>k.value=a),round:"",position:"center",style:{width:"85%",maxWidth:"400px"}},{default:T(()=>[h.value?(d(),w("div",aa,[t("div",{class:J(["announcement-detail-header",h.value.type])},[u(l,{name:h.value.type==="update"?"upgrade":h.value.type==="warning"?"warning-o":"info-o",size:"24"},null,8,["name"]),t("h3",null,m(h.value.title),1)],2),t("div",sa,[(d(!0),w(M,null,Y(h.value.content.split(`
`),(a,j)=>(d(),w("p",{key:j},[a.startsWith("http")?(d(),w("a",{key:0,href:a,target:"_blank",class:"announcement-link",onClick:e[22]||(e[22]=xe(()=>{},["stop"]))},m(a),9,oa)):(d(),w("span",la,m(a),1))]))),128))]),t("div",ia,[h.value.type==="update"?(d(),K(V,{key:0,block:"",type:"primary",onClick:e[23]||(e[23]=a=>{I(),ee()})},{default:T(()=>[...e[49]||(e[49]=[U(" 立即更新 ",-1)])]),_:1})):R("",!0),u(V,{block:"",plain:"",onClick:ee},{default:T(()=>[U(m(h.value.type==="update"?"稍后再说":"知道了"),1)]),_:1})])])):R("",!0)]),_:1},8,["show"])])}}}),Na=ze(ua,[["__scopeId","data-v-4018e96b"]]);export{Na as default};
