import{d as O,t as w,b3 as U,m as z,k as o,c as T,r as _,B as R,b1 as M,C as V,u as W,p as D,H as b,b2 as G,b4 as Y,G as F,F as Z,aP as j,ah as q,Z as J,aO as Q,D as X,n as ee,ar as te,b5 as p,aV as ne,b6 as oe,b7 as ae,l as le,aR as se,b8 as re,b9 as ce,ba as ie}from"./index-COLuSNnH.js";import{B as S}from"./index-dROw2vyl.js";const[I,A]=T("action-bar"),N=Symbol(I),ue={placeholder:Boolean,safeAreaInsetBottom:w};var de=O({name:I,props:ue,setup(e,{slots:a}){const n=_(),s=U(n,A),{linkChildren:r}=z(N);r();const f=()=>{var m;return o("div",{ref:n,class:[A(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(m=a.default)==null?void 0:m.call(a)])};return()=>e.placeholder?s(f):f()}});const fe=R(de),[me,Be]=T("action-bar-button"),ge=b({},G,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var be=O({name:me,props:ge,setup(e,{slots:a}){const n=M(),{parent:s,index:r}=V(N),f=D(()=>{if(s){const c=s.children[r.value-1];return!(c&&"isButton"in c)}}),m=D(()=>{if(s){const c=s.children[r.value+1];return!(c&&"isButton"in c)}});return W({isButton:!0}),()=>{const{type:c,icon:B,text:g,color:v,loading:y,disabled:P}=e;return o(S,{class:Be([c,{last:m.value,first:f.value}]),size:"large",type:c,icon:B,color:v,loading:y,disabled:P,onClick:n},{default:()=>[a.default?a.default():g]})}}});const E=R(be),[he,i,C]=T("dialog"),Ce=b({},Q,{title:String,theme:String,width:ee,message:[String,Function],callback:Function,allowHtml:Boolean,className:X,transition:te("van-dialog-bounce"),messageAlign:String,closeOnPopstate:w,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:w,closeOnClickOverlay:Boolean,keyboardEnabled:w,destroyOnClose:Boolean}),we=[...j,"transition","closeOnPopstate","destroyOnClose"];var ve=O({name:he,props:Ce,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:a,slots:n}){const s=_(),r=le({confirm:!1,cancel:!1}),f=t=>a("update:show",t),m=t=>{var l;f(!1),(l=e.callback)==null||l.call(e,t)},c=t=>()=>{e.show&&(a(t),e.beforeClose?(r[t]=!0,se(e.beforeClose,{args:[t],done(){m(t),r[t]=!1},canceled(){r[t]=!1}})):m(t))},B=c("cancel"),g=c("confirm"),v=Y(t=>{var l,u;if(!e.keyboardEnabled||t.target!==((u=(l=s.value)==null?void 0:l.popupRef)==null?void 0:u.value))return;({Enter:e.showConfirmButton?g:p,Escape:e.showCancelButton?B:p})[t.key](),a("keydown",t)},["enter","esc"]),y=()=>{const t=n.title?n.title():e.title;if(t)return o("div",{class:i("header",{isolated:!e.message&&!n.default})},[t])},P=t=>{const{message:l,allowHtml:u,messageAlign:d}=e,h=i("message",{"has-title":t,[d]:d}),k=ne(l)?l():l;return u&&typeof k=="string"?o("div",{class:h,innerHTML:k},null):o("div",{class:h},[k])},H=()=>{if(n.default)return o("div",{class:i("content")},[n.default()]);const{title:t,message:l,allowHtml:u}=e;if(l){const d=!!(t||n.title);return o("div",{key:u?1:0,class:i("content",{isolated:!d})},[P(d)])}},K=()=>o("div",{class:[ae,i("footer")]},[e.showCancelButton&&o(S,{size:"large",text:e.cancelButtonText||C("cancel"),class:i("cancel"),style:{color:e.cancelButtonColor},loading:r.cancel,disabled:e.cancelButtonDisabled,onClick:B},null),e.showConfirmButton&&o(S,{size:"large",text:e.confirmButtonText||C("confirm"),class:[i("confirm"),{[oe]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:r.confirm,disabled:e.confirmButtonDisabled,onClick:g},null)]),$=()=>o(fe,{class:i("footer")},{default:()=>[e.showCancelButton&&o(E,{type:"warning",text:e.cancelButtonText||C("cancel"),class:i("cancel"),color:e.cancelButtonColor,loading:r.cancel,disabled:e.cancelButtonDisabled,onClick:B},null),e.showConfirmButton&&o(E,{type:"danger",text:e.confirmButtonText||C("confirm"),class:i("confirm"),color:e.confirmButtonColor,loading:r.confirm,disabled:e.confirmButtonDisabled,onClick:g},null)]}),L=()=>n.footer?n.footer():e.theme==="round-button"?$():K();return()=>{const{width:t,title:l,theme:u,message:d,className:h}=e;return o(J,F({ref:s,role:"dialog",class:[i([u]),h],style:{width:q(t)},tabindex:0,"aria-labelledby":l||d,onKeydown:v,"onUpdate:show":f},Z(e,we)),{default:()=>[y(),H(),L()]})}}});let x;const ye={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,destroyOnClose:!1};let Pe=b({},ye);function ke(){({instance:x}=ce({setup(){const{state:a,toggle:n}=ie();return()=>o(ve,F(a,{"onUpdate:show":n}),null)}}))}function Se(e){return re?new Promise((a,n)=>{x||ke(),x.open(b({},Pe,e,{callback:s=>{(s==="confirm"?a:n)(s)}}))}):Promise.resolve(void 0)}const Te=e=>Se(b({showCancelButton:!0},e));export{Te as s};
