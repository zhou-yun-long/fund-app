import{c as W,H as X,aO as Z,t as $,ar as j,a9 as Q,aP as Y,d as R,k as n,G as ee,F as te,Z as ne,X as O,aq as ae,v as se,a2 as oe,B as le,o as re,R as h,L as v,M as s,U,V as z,K,T as x,r as k,J as f,N as w,$ as L,O as I,a3 as F,af as ie,W as ce,_ as ue}from"./index-COLuSNnH.js";/* empty css              *//* empty css              */import"./index-BR0IqM1Y.js";import{F as de}from"./index-BsOY-DgV.js";import{E as pe}from"./index-7ADYuEsa.js";import{S as me}from"./index-DhMkXSC4.js";/* empty css              */import{S as ve}from"./index-C5fvOtBV.js";import{N as fe}from"./index-DtBFF6eJ.js";import{u as _e}from"./fund-qjlmdvOA.js";import{B as ye}from"./index-dROw2vyl.js";import{s as he}from"./function-call-fsbkCKQc.js";import"./use-id-Bb8U-BO_.js";import"./fundFast-BTB3GdVE.js";import"./storage-BvZjhTaj.js";const[ke,d]=W("action-sheet"),we=X({},Z,{title:String,round:$,actions:Q(),closeIcon:j("cross"),closeable:$,cancelText:String,description:String,closeOnPopstate:$,closeOnClickAction:Boolean,safeAreaInsetBottom:$}),ge=[...Y,"round","closeOnPopstate","safeAreaInsetBottom"];var Ce=R({name:ke,props:we,emits:["select","cancel","update:show"],setup(c,{slots:u,emit:i}){const p=o=>i("update:show",o),t=()=>{p(!1),i("cancel")},_=()=>{if(c.title)return n("div",{class:d("header")},[c.title,c.closeable&&n(O,{name:c.closeIcon,class:[d("close"),ae],onClick:t},null)])},m=()=>{if(u.cancel||c.cancelText)return[n("div",{class:d("gap")},null),n("button",{type:"button",class:d("cancel"),onClick:t},[u.cancel?u.cancel():c.cancelText])]},C=o=>{if(o.icon)return n(O,{class:d("item-icon"),name:o.icon},null)},P=(o,y)=>o.loading?n(oe,{class:d("loading-icon")},null):u.action?u.action({action:o,index:y}):[n("span",{class:d("name")},[o.name]),o.subname&&n("div",{class:d("subname")},[o.subname])],g=(o,y)=>{const{color:B,loading:b,callback:S,disabled:A,className:N}=o,l=()=>{A||b||(S&&S(o),c.closeOnClickAction&&p(!1),se(()=>i("select",o,y)))};return n("button",{type:"button",style:{color:B},class:[d("item",{loading:b,disabled:A}),N],onClick:l},[C(o),P(o,y)])},V=()=>{if(c.description||u.description){const o=u.description?u.description():c.description;return n("div",{class:d("description")},[o])}};return()=>n(ne,ee({class:d(),position:"bottom","onUpdate:show":p},te(c,ge)),{default:()=>{var o;return[_(),V(),n("div",{class:d("content")},[c.actions.map(g),(o=u.default)==null?void 0:o.call(u)]),m()]}})}});const be=le(Ce),Se={class:"alerts-page"},Ae={class:"alert-list"},$e={class:"alert-item"},Ie={class:"alert-left"},Pe={class:"alert-info"},Ve={class:"alert-name"},Be={class:"alert-desc"},Ne={class:"add-form"},Te={class:"fund-select"},xe={key:0,class:"selected-fund"},Fe={class:"fund-name"},Oe={class:"fund-code"},De={key:1,class:"search-results"},Ee=["onClick"],Ue={class:"fund-name"},ze={class:"fund-code"},Ke={class:"type-selector"},Le={class:"type-options"},Re={class:"form-actions"},He=R({__name:"Alerts",setup(c){const u=ce();_e();const i=k([]),p=k(!1),t=k({code:"",name:"",type:"up",threshold:3}),_=k(""),m=k([]),C=k(!1);re(()=>{P()});function P(){const l=localStorage.getItem("fund_alerts");if(l)try{i.value=JSON.parse(l)}catch{i.value=[]}}function g(){localStorage.setItem("fund_alerts",JSON.stringify(i.value))}function V(){if(!t.value.code){F("请选择基金");return}const l={id:`alert_${Date.now()}`,code:t.value.code,name:t.value.name,type:t.value.type,threshold:t.value.threshold,enabled:!0,createdAt:Date.now()};i.value.push(l),g(),p.value=!1,F("添加成功"),t.value={code:"",name:"",type:"up",threshold:3}}function o(l){const e=i.value.find(r=>r.id===l);e&&(e.enabled=!e.enabled,g())}async function y(l){try{await he({title:"删除提醒",message:"确定删除这条提醒规则？"}),i.value=i.value.filter(e=>e.id!==l),g(),F("已删除")}catch{}}function B(l,e){switch(l){case"up":return`涨幅超过 ${e}%`;case"down":return`跌幅超过 ${e}%`;case"time":return`每日 ${e}:00 提醒`;case"value":return`净值达到 ${e}`;default:return""}}function b(l){switch(l){case"up":return"arrow-up";case"down":return"arrow-down";case"time":return"clock-o";case"value":return"chart-trending-o";default:return"bell"}}function S(){u.back()}async function A(){if(!_.value.trim()){m.value=[];return}C.value=!0;try{const{searchFund:l}=await ie(async()=>{const{searchFund:r}=await import("./fund-BsJItZTy.js");return{searchFund:r}},[]),e=await l(_.value);m.value=e.slice(0,10).map(r=>({code:r.code,name:r.name}))}catch{m.value=[]}finally{C.value=!1}}function N(l){t.value.code=l.code,t.value.name=l.name,_.value="",m.value=[]}return(l,e)=>{const r=O,H=fe,J=ve,T=ye,M=me,q=pe,D=de,G=be;return f(),h("div",Se,[n(H,{title:"智能提醒","left-arrow":"",onClickLeft:S},{right:v(()=>[n(r,{name:"plus",size:"20",onClick:e[0]||(e[0]=a=>p.value=!0)})]),_:1}),s("div",Ae,[(f(!0),h(U,null,z(i.value,a=>(f(),K(M,{key:a.id},{right:v(()=>[n(T,{square:"",type:"danger",text:"删除",class:"delete-btn",onClick:E=>y(a.id)},null,8,["onClick"])]),default:v(()=>[s("div",$e,[s("div",Ie,[n(r,{name:b(a.type),size:"24",class:"type-icon"},null,8,["name"]),s("div",Pe,[s("div",Ve,w(a.name),1),s("div",Be,w(B(a.type,a.threshold)),1)])]),n(J,{"model-value":a.enabled,size:"20","onUpdate:modelValue":E=>o(a.id)},null,8,["model-value","onUpdate:modelValue"])])]),_:2},1024))),128)),i.value.length===0?(f(),K(q,{key:0,image:"search",description:"暂无提醒规则"},{default:v(()=>[n(T,{round:"",type:"primary",size:"small",onClick:e[1]||(e[1]=a=>p.value=!0)},{default:v(()=>[...e[10]||(e[10]=[L(" 添加提醒 ",-1)])]),_:1})]),_:1})):x("",!0)]),n(G,{show:p.value,"onUpdate:show":e[9]||(e[9]=a=>p.value=a),title:"添加提醒"},{default:v(()=>[s("div",Ne,[s("div",Te,[n(D,{modelValue:_.value,"onUpdate:modelValue":[e[2]||(e[2]=a=>_.value=a),A],placeholder:"搜索基金代码或名称",clearable:""},{"left-icon":v(()=>[n(r,{name:"search"})]),_:1},8,["modelValue"]),t.value.code?(f(),h("div",xe,[s("span",Fe,w(t.value.name),1),s("span",Oe,w(t.value.code),1),n(r,{name:"cross",onClick:e[3]||(e[3]=a=>{t.value.code="",t.value.name=""})})])):x("",!0),m.value.length>0?(f(),h("div",De,[(f(!0),h(U,null,z(m.value,a=>(f(),h("div",{key:a.code,class:"result-item",onClick:E=>N(a)},[s("span",Ue,w(a.name),1),s("span",ze,w(a.code),1)],8,Ee))),128))])):x("",!0)]),s("div",Ke,[e[15]||(e[15]=s("div",{class:"type-label"},"提醒类型",-1)),s("div",Le,[s("div",{class:I(["type-option",{active:t.value.type==="up"}]),onClick:e[4]||(e[4]=a=>t.value.type="up")},[n(r,{name:"arrow-up"}),e[11]||(e[11]=s("span",null,"涨幅提醒",-1))],2),s("div",{class:I(["type-option",{active:t.value.type==="down"}]),onClick:e[5]||(e[5]=a=>t.value.type="down")},[n(r,{name:"arrow-down"}),e[12]||(e[12]=s("span",null,"跌幅提醒",-1))],2),s("div",{class:I(["type-option",{active:t.value.type==="time"}]),onClick:e[6]||(e[6]=a=>t.value.type="time")},[n(r,{name:"clock-o"}),e[13]||(e[13]=s("span",null,"定时提醒",-1))],2),s("div",{class:I(["type-option",{active:t.value.type==="value"}]),onClick:e[7]||(e[7]=a=>t.value.type="value")},[n(r,{name:"chart-trending-o"}),e[14]||(e[14]=s("span",null,"净值提醒",-1))],2)])]),n(D,{modelValue:t.value.threshold,"onUpdate:modelValue":e[8]||(e[8]=a=>t.value.threshold=a),modelModifiers:{number:!0},label:t.value.type==="time"?"提醒时间":t.value.type==="value"?"目标净值":"涨跌幅(%)",type:"number",placeholder:t.value.type==="time"?"如：9 表示9点":t.value.type==="value"?"如：1.5":"如：3 表示3%"},null,8,["modelValue","label","placeholder"]),s("div",Re,[n(T,{block:"",type:"primary",onClick:V},{default:v(()=>[...e[16]||(e[16]=[L(" 确认添加 ",-1)])]),_:1})])])]),_:1},8,["show"])])}}}),lt=ue(He,[["__scopeId","data-v-d2439437"]]);export{lt as default};
